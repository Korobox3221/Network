{% extends "network/layout.html" %}
{% load static %}
{% block body %}
    <h1 class = 'n_header'>All posts</h1>
    {% if user.is_authenticated %}
        <div class = 'new_post_div'>
            <div class = 'new_post_cap'>
                <figure>
                    <form method = 'post'>
                        {% csrf_token %}
                        <figcaption> <h5>New post</h2></figcaption>
                        <figcaption><textarea name = 'new_post' class = 'new_post_text' ></textarea></figcaption>
                        <figcaption ><input  class ='new_post_btn' value = 'Post' type = 'submit'  ></figcaption>
                    </form>
                </figure>
            </div>
        </div>
    {% endif %}
         <br>
            {% for post in page_obj %}
            <div class = 'new_post_div'>
                <div id = 'post-txt' class = 'new_post_cap' data-post-id = "{{ post.id }}">
                    <h3 class = 'post_user'><a class = 'link' href = '/profile/{{post.user}}'>{{post.user}}</a></h3>
                    {% if user == post.user %}
                        <button class="edit-btn">Edit</button>
                    {% endif %}
                    <p class = 'post_text'>{{post.post_text}}</p>
                    <textarea data-post-id = "{{ post.id }}" class = "edit-textarea" style = 'display:none;'></textarea>
                    <div class = 'edit-actions' style = 'display:none'>
                        <button class = "save-edit">Save</button>
                        <button class = "cancel-edit">Cancel</button>
                    </div>
                    <p class = 'post_time'>{{post.time}}<p>
                    <div ><button class="like-btn" data-post-id="{{ post.id }}" data-liked="{{ post.is_liked|yesno:'true,false' }}">
                            {{ post.is_liked|yesno:"‚ù§Ô∏è Unlike,ü§ç Like" }}
                        </button>
                        <span class="like-count">{{ post.like_counter }}</span>
                    </div>
                </div>
            </div>
            <br>
            {% endfor %}
            <div class="pagination">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ page_obj.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
        </span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">next</a>
            <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
    </span>
</div>
<script src = 'static/network/edit.js'>
</script>
{% endblock %}
